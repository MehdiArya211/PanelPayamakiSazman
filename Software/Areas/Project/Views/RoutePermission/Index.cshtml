@{
    ViewData["Title"] = "تعریف مجوزها (Route Permissions)";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">
            <i class="bi bi-shield-lock text-primary"></i>
            @ViewData["Title"]
        </h5>

        <div class="d-flex gap-2">
            <div class="input-group input-group-sm" style="width: 250px;">
                <input type="text" class="form-control"
                       id="searchInput"
                       placeholder="جستجوی Route یا Action...">
                <button class="btn btn-outline-secondary" type="button"
                        onclick="routePermission.search()">
                    <i class="bi bi-search"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="card-body">
        <div class="table-responsive">
            <table id="routePermissionTable" class="table table-striped table-bordered w-100">
                <thead>
                    <tr>
                        <th>Route Key</th>
                        <th>Actions</th>
                        <th>Requires Fresh Auth</th>
                        <th>عملیات</th>
                    </tr>
                </thead>
                <tbody id="permissionTableBody">
                    <!-- داده‌ها به صورت داینامیک لود می‌شوند -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="d-flex justify-content-between align-items-center mt-3">
            <div class="text-muted small" id="permissionCount">
                در حال بارگذاری...
            </div>
            <nav>
                <ul class="pagination pagination-sm" id="pagination">
                    <!-- Pagination به صورت داینامیک ایجاد می‌شود -->
                </ul>
            </nav>
        </div>
    </div>
</div>

<!-- Modal Container -->
<div class="modal fade" id="routePermissionModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" id="routePermissionModalContent">
            <!-- محتوای modal اینجا لود می‌شود -->
        </div>
    </div>
</div>

@section Styles {
    <style>
        .route-key {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            border: 1px solid #dee2e6;
        }

        .action-badge {
            margin: 2px;
            font-size: 0.75rem;
        }

        .permission-row {
            transition: background-color 0.2s;
        }

        .permission-row:hover {
            background-color: #f8f9fa;
        }
    </style>
}

@section Scripts {
    @await Html.PartialAsync("_ValidationScriptsPartial")

    <script src="~/areas/project/routepermission.js"></script>
}